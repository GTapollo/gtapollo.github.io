<!DOCTYPE html>
<html>
  <head>
    <meta name="description" content="欢迎访问 Harttle 的个人主页，这里记录了 harttle 关于计算机技术的文章、个人信息与相册，以及有用的资源分享和下载。">
    <meta name="keywords" content="Linux Web 计算机 开发 编程">
    <meta name="author" content="harttle">      
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>计算机网络 - Harttle Land</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- style -->
    <!-- Bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    
    <!-- font-awesome -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
      
    <!-- Custom styles  -->
    <link href="/assets/css/sticky-footer-navbar.css" rel="stylesheet">
    <link href="/assets/css/main.css" rel="stylesheet">

    <!-- Icon -->
    <link rel="shortcut icon" href="/assets/img/favicon.png"> 

    
    
<style>
.headerbar{
  background: rgba(255, 255, 255, 0.75);
  box-shadow: inset 0 -1px 0 white, 0 1px 5px rgba(0,0,0,.3);
}
.headerbar .page-header{
  border-bottom: 0;
  margin-bottom: 0px;
  margin-top: 0px;
}
#page-content{
  margin-top: 20px;
  margin-bottom: 15px;
}
</style>


<link rel="stylesheet" href="/assets/css/markdown.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
<style>
  /* By default it's not affixed in mobile views, so undo that */
  .sidebar.affix {
    position: static;
  }
  
  /* First level of nav */
  .sidenav {
    margin-top: 20px;
    margin-bottom: 20px; 
    padding-top:    10px;
    padding-bottom: 10px;
    text-shadow: 0 1px 0 #fff;
    background-color: #f5f5f5;
    border-radius: 5px;
  }
  
  /* All levels of nav */
  .sidebar .nav > li > a {
    display: block;
    color: #6c6c6c;
    padding: 5px 20px;
  }
  .sidebar .nav > li > a:hover,
  .sidebar .nav > li > a:focus {
    text-decoration: none;
    background-color: #e5e5e5;
    border-right: 1px solid #d5d5d5;
  }
  .sidebar .nav > .active > a,
  .sidebar .nav > .active:hover > a,
  .sidebar .nav > .active:focus > a {
    font-weight: bold;
    color: #555;
    background-color: transparent;
    border-right: 1px solid #000;
  }
  
  /* Nav: second level (shown on .active) */
  .sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    margin-bottom: 8px;
  }
  .sidebar .nav .nav > li > a {
    padding-top:    3px;
    padding-bottom: 3px;
    padding-left: 30px;
    font-size: 90%;
  }
  .sidebar .nav .nav .nav > li > a {
    padding-left: 40px;
  }
  .sidebar .nav .nav .nav .nav > li > a {
    padding-left: 50px;
  }
  .sidebar .nav .nav .nav .nav .nav > li > a {
    padding-left: 60px;
  }
  .sidebar .nav .nav .nav .nav .nav .nav> li > a {
    padding-left: 70px;
  }  
  
  /* Show and affix the side nav when space allows it */
  @media (min-width: 992px) {
    .sidebar .nav > .active > ul {
      display: block;
    }
    /* Widen the fixed sidebar */
    .sidebar.affix,
    .sidebar.affix-top,
    .sidebar.affix-bottom {
      width: 213px;
    }
    .sidebar.affix {
      position: fixed; /* Undo the static from mobile first approach */
      top: 90px;
    }
    .sidebar.affix-bottom {
      position: absolute; /* Undo the static from mobile first approach */
    }
    .sidebar.affix-bottom .sidenav,
    .sidebar.affix .sidenav {
      margin-top: 0;
      margin-bottom: 0;
    }
  }
  @media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .sidebar.affix-bottom,
    .sidebar.affix-top,
    .sidebar.affix {
      width: 263px;
    }
  } 
    
  .MathJax *{
    color: black!important;  
  }
</style>


    <!-- style -->
  </head>
  
  <body>
  
  <!-- content -->  
    <!-- Wrap all page content here -->
    <div id="wrap">

      <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-inverse navbar-fixed-top global-nav">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Harttle Land</a>
          </div>
          <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              <li id="blog"><a href="/category/blog.html">博客</a></li>
              <li id="album"><a href="/category/album.html">相册</a></li>
              <li id="about"><a href="/about.html">关于</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">链接 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="//harttle.duapp.com" target="_blank">God Notes</a></li>
                  <li><a href="//www.pku.edu.cn/" target="_blank">北京大学</a></li>
                </ul>
              </li>
            </ul>
	    <ul class="nav navbar-nav pull-right">	 
	      <li>
		<a href="//github.com/harttle/harttle.github.io" target="_blank">
		  <i class="fa fa-github fa-lg"></i> GitHub
		</a>
	      </li>
	      <li>
		<a href="/feed.xml" target="_blank">
		  <i class="fa fa-rss-square fa-lg"></i> RSS
		</a>
	      </li>
	    </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>

      <!-- Begin page content -->
      <div id="main-content">
	
	
<div class="headerbar">
  <div class="page-header container">
    <h1>
      计算机网络 <small></small>
    </h1>
    <div>
      
      <span class="label label-info pull-left" style="margin-right: 10px;"><span class="glyphicon glyphicon-folder-open"></span> 笔记</span>
      
      
      <span class="label label-success pull-left hidden-xs" style="margin-right: 10px;"><span class="glyphicon glyphicon-tag"></span> 读书笔记</span>
      
      <span class="label label-success pull-left hidden-xs" style="margin-right: 10px;"><span class="glyphicon glyphicon-tag"></span> 网络</span>
      
      <a class="pull-right label label-warning" href="/category/blog.html" style="margin-left: 10px;">
          返回列表 <span class="glyphicon glyphicon-hand-left"></span>
      </a>
      <span class="pull-right label label-default hidden-xs">
          <span class="glyphicon glyphicon-time"></span> 2013年10月28日
      </span>
    </div>
  </div>
</div>

<div class="container">
 
  <div id="page-content">
    
    
<div class="row post-display">
    <div class="col-md-3 left" >
      <div class="sidebar"></div>
    </div>
    <div class="col-md-9 right md">
      <h1>概述</h1>
<ul>
<li>分布式系统<br>对于用户是一个统一的整体，只有一个模型或泛型，由操作系统之上的中间件负责实现。<br>eg. 万维网(world wide web)</li>
<li>计算机网络<br>大量独立的计算机互相连接起来共同完成计算任务。</li>
</ul>
<h2>计算机网络的应用</h2>
<h3>商业应用</h3>
<ul>
<li>资源共享<br>地理位置束缚、客户-服务器模型</li>
<li>通信媒介<br>电子邮件、电子商务</li>
</ul>
<h3>家庭应用</h3>
<ul>
<li>即时消息、聊天室 </li>
<li>对等通信(p2p)</li>
</ul>
<h3>移动用户</h3>
<ul>
<li>PDA（personal digital assistants）</li>
<li>固定无线、移动无线</li>
<li>WAP 1.0（wireless application protocol）：针对小屏幕简化的Web页面。</li>
</ul>
<h2>网络硬件</h2>
<ul>
<li>广播网络：广播、多播</li>
<li>点到点：单播</li>
<li>个人区域网络-&gt;局域网-&gt;城域网-&gt;广域网-&gt;Internet</li>
</ul>
<h3>局域网 LAN（local area network）</h3>
<ul>
<li>总线型网络：以太网 IEEE 802.3</li>
<li>环形网络：IBM令牌环 IEEE 802.5</li>
</ul>
<h3>城域网 MAN（metropolitan area network）</h3>
<ul>
<li>有线电视 </li>
<li>集中控制：头端</li>
</ul>
<h3>广域网 WAN（wide area network）</h3>
<ul>
<li>主机、交换单元、通信子网、传输线、路由器 </li>
<li>存储转发（分组交换）、路由算法</li>
</ul>
<h3>无线网络</h3>
<ul>
<li>系统互联：计算机外部设备 eg. 蓝牙</li>
<li>无线 LAN：IEEE 802.11</li>
<li>无线 WAN：蜂窝电话、IEEE 802.16</li>
</ul>
<h3>互联网</h3>
<p>通过网关互相连接起来的网络</p>
<h2>网络软件</h2>
<h3>协议层次</h3>
<ul>
<li>协议：通信双方关于如何进行通信的约定</li>
<li>对等体：不同机器上包含对应层的实体</li>
<li>接口：定义了下层向上层提供哪些原语操作和服务</li>
<li>网络体系结构：层和协议的集合</li>
<li>协议栈：一个特定的系统所使用的一组协议</li>
</ul>
<h3>各层的设计问题</h3>
<ul>
<li>编址机制</li>
<li>错误控制</li>
<li>流控制：传送速率</li>
<li>多路复用、多路解复用：为多个上层会话使用同一个连接</li>
</ul>
<h3>其他</h3>
<ul>
<li>面向连接与无连接的服务</li>
<li>服务：某一层向它的上一层提供的一组原语</li>
<li>协议：一组规则，规定同一层对等实体间交换的信息的格式和含义</li>
</ul>
<h2>参考模型</h2>
<p><img src="http://static.oschina.net/uploads/space/2013/0519/012337_5jas_698768.gif" alt="MODEL"></p>
<h2>网络实例</h2>
<h3>Internet</h3>
<ul>
<li>ARPANET：advanced research project agency，比电话网络更好的命令和控制系统。</li>
<li>NSFNET：national science foundation，使用ARPANET的硬件；首次使用TCP/IP协议。</li>
<li>Internet：客户-&gt;POP（point of presence，汇接点）-&gt;区域ISP（internet service provider，服务提供商）-&gt;骨干网-&gt;NAP（network access point）-&gt;服务器</li>
</ul>
<h3>面向连接的网络：X.25、帧中继、ATM</h3>
<ul>
<li>X.25：第一个公共的数据网络</li>
<li>帧中继：无错误控制、无流控制</li>
<li>ATM（asynchronous transfer mode，异步传输模式）虚电路：155Mbps、622Mbps</li>
<li>ATM 参考模型</li>
</ul>
<p><img src="http://static.oschina.net/uploads/space/2013/0519/015728_Kcl0_698768.jpg" alt="atm"></p>
<h3>以太网</h3>
<ul>
<li>ALOHANET：短距离无线电波（夏威夷，分上行和下行，通过冲突检测）</li>
<li>Ethernet：DIX标准（多支路电缆，通过监听电缆确定发送）、令牌（获得令牌的计算机可以发送）、IBM令牌环</li>
</ul>
<h3>无线 LAN：802.11</h3>
<ul>
<li>有基站模式：访问点（access point）</li>
<li>无基站模式：ad hoc 网络</li>
<li>困难：冲突检测、多径衰减、移动性</li>
</ul>
<h2>网络标准化</h2>
<ul>
<li>事实（de facto）、法定（de jure）</li>
<li>电信领域：公共承运商、邮电部（PTT）、国际电信联盟（ITU或CCITT）</li>
<li>国际标准领域：ISO，成员包括ANSI（美国）、BSI（英国）、AFNOR（法国）、DIN（德国）；电气和电子工程师协会（IEEE）</li>
<li>Internet 标准领域：IAB（internet activities board）包括IRTF（internet research task force）和IETF（internet engineering task force），通过RFC（request for comments 标准提案-&gt;标准草案）完成标准。</li>
</ul>
<h1>物理层</h1>
<h2>数据通信的理论基础</h2>
<ul>
<li>傅里叶分析</li>
<li>带宽：传输过程中振幅不会明显减弱的一段频率范围</li>
<li>尼奎斯特定理：无噪声、有限带宽信道的最大传输率=2Hlog2(V) b/s</li>
<li>香农定理：带宽为H，信噪比为S/N的信道最大传输率=Hlog2(1+S/N)</li>
</ul>
<h2>有导向的传输介质</h2>
<ul>
<li>磁介质：物理磁带</li>
<li>无屏蔽双绞线（UTP，unshielded twisted pair）：3类双绞线（4对在一个塑料套内）；5类双绞线（拧得更紧，串音更少）</li>
<li>IBM屏蔽双绞线</li>
<li>同轴电缆：屏蔽性好，可以传输很长距离</li>
<li>光纤：多模光纤、单模光纤；有源中继器、无源星型结构</li>
</ul>
<h2>无线传输</h2>
<ul>
<li>电磁波：调频扩频、直接序列扩频</li>
<li>无线电传输：VLF、LF、MF（沿地表）；HF、VHF（电离层）</li>
<li>微波传输：多径衰减、ISM频段</li>
<li>红外线与毫米波</li>
<li>光波传输</li>
</ul>
<h2>通信卫星</h2>
<ul>
<li>异频发射应答器、弯曲管道</li>
</ul>
<h3>同步卫星 GEO</h3>
<ul>
<li>Geostationary Earth Orbit</li>
<li>保持站位、足迹（覆盖范围）、小孔终端（VSAT）、中心站（hub，连接VSAT）</li>
</ul>
<h3>中间轨道卫星 MEO</h3>
<ul>
<li>Medium Earth Orbit</li>
<li>GPS：24颗</li>
</ul>
<h3>低轨道卫星 LEO</h3>
<ul>
<li>Low Earth Orbit</li>
<li>铱计划：77颗，改名为镝（66颗卫星）；针对偏远地区的电话用户；太空转发</li>
<li>Globalstar：48颗；传回地面转发</li>
<li>Teledesic：288颗；针对internet用户</li>
</ul>
<h2>公共交换电话网络</h2>
<h3>电话系统结构</h3>
<ul>
<li>电话-&gt;本地回路-&gt;端局-&gt;长途干线-&gt;长途局-&gt;中心交换局-&gt;长途局...</li>
</ul>
<h3>电话业中的政治学</h3>
<ul>
<li>ATT分解为ATT长话公司和23个Bell 运行公司（BOC，bell operating company）</li>
<li>每个LATA（local access and transport areas）内有一个LEC（local exchange carrier）；IXC（IntereXchange carrier）在LATA区域建立POP（point of presence）实现LATA间通信。</li>
</ul>
<h3>本地回路</h3>
<ul>
<li>调制解调器：正弦载波、调频、调幅、波特、码元、QPSK、QAM-16、TCM、V.32 bis(14400bps)、V.34 bis（33.6kbps）、V.90（33.6kbps上行，56kbps下行）、V.92（48kbps上行）</li>
<li>全双工（同时两个方向的传输）、半双工（同时只有一个方向）、单工（只有一个方向）</li>
<li>数字用户线路（DSL，digital subscriber lines）、非对称数字用户线路（ADSL，asymmetric DSL）：ATT将整个带宽划分为多个频段，包括语音、上行数据、下行数据</li>
<li>无线本地回路：ILEC、CLEC、WLL、MMDS、LMDS</li>
</ul>
<h3>干线和多路复用</h3>
<ul>
<li>频分多路复用 FDM</li>
<li>波分多路复用 WDM</li>
<li>时分多路复用 TDM</li>
<li>SONET/SDH</li>
</ul>
<h3>交换</h3>
<ul>
<li>电路交换：建立物理连接</li>
<li>报文交换：存储转发网络</li>
<li>分组交换：数据块大小上限</li>
</ul>
<h2>移动电话系统</h2>
<ul>
<li>按钮启动式通话系统：只有一个信道</li>
<li>IMTS（improved mobile telephone system）：上行和下行信道</li>
</ul>
<h3>第一代：模拟语音</h3>
<ul>
<li>AMPS（advanced mobile phone system）：蜂窝单元、微蜂窝单元、MTSO（mobile telephone switching office，移动电话交换局）、MSC（mobile switching center，移动交换中心）、移交（软移交、硬移交）</li>
<li>信道：832个全双工信道，包括控制、呼叫、访问、数据</li>
</ul>
<h3>第二代：数字语音</h3>
<ul>
<li>D-AMPS（数字的高级移动电话系统）：美国，MAHO（移动电话辅助移交），使用FDM、TDM</li>
<li>GSM（global system for mobile communication，全球移动通信系统）：美国和日本（修订形式），使用FDM、TDM</li>
<li>CDMA（code division multiple access，码分多路访问）：美国和欧洲、时间片、正交的时间片序列（1为时间片序列、0为其补码）</li>
</ul>
<h3>第三代：数字语音与数据</h3>
<ul>
<li>IMT-2000（international mobile telecommunications）：ITU提出，筛选后的提案主要有两个：</li>
<li>WCDMA（wideband CDMA）：爱立信提出，欧盟称其为UMTS（universal mobile telecomunications system） </li>
<li>CDMA2000：qualcomm提出</li>
<li>爱立信购买qualcomm基本方案，提出3G</li>
<li>2.5G提案：EDGE（enhanced data rates for GSM evolution，基于GSM）、GPRS（general packet radio service，基于D-AMPS或者GSM上的层叠分组网络）</li>
</ul>
<h2>有线电视</h2>
<ul>
<li>共天线电视：天线（头端）-&gt;同轴电缆-&gt;分接头-&gt;电视落线</li>
<li>基于有线电视网络的internet</li>
<li>HFC（hybrid fiber coax）：交换机-&gt;头端-&gt;光纤干线-&gt;光纤节点-&gt;同轴电缆-&gt;分接头-&gt;住宅（用户间冲突）</li>
<li>固定电话系统：长途局（由光纤干线相连）-&gt;光纤-&gt;端局-&gt;本地回路-&gt;铜的双绞线-&gt;住宅</li>
<li>频谱分配：上行数据、下行数据（TV、FM、下行数据流）</li>
<li>电缆调制解调器（DOCSIS，data over cable service interface specification）：通过电视电缆访问internet</li>
<li>ASDL与有线电视网</li>
<li>均使用光纤的骨干网</li>
<li>有线电视网拥有几百倍与双绞线的承载容量</li>
<li>有线电视网难以说明有效带宽容量：取决于用户数量和电视节目带宽</li>
<li>ASDL更可靠：备份电源</li>
</ul>
<h1>数据链路层</h1>
<h2>设计要点</h2>
<ul>
<li>为网络层提供服务：无确认的无连接服务、有确认的无连接服务、有确认的面向连接服务</li>
<li>处理传输错误</li>
<li>流控制：基于反馈的流控制、基于速率的流控制</li>
</ul>
<h2>错误检测与纠正</h2>
<h3>纠错码</h3>
<ul>
<li>包含冗余信息，使接收方知道肯定包含哪些信息（前向纠错）</li>
<li>海明距离：两码字中不同位数</li>
<li>编码方案的海明距离：合法码字列表中最小的海明距离</li>
<li>纠错码；为检测d个错误，需要海明距离为d+1的编码方案；为纠正d个错误，需要海明距离为2d+1的编码方案</li>
<li>海明码：纠正单个错误、突发性错误（每次传送一列，分散错误）</li>
</ul>
<h3>检错码</h3>
<ul>
<li>包含冗余信息，使接收方知道发生了错误并请求重传。</li>
<li>多项式编码（polynomial code），也称CRC（cyclic redundancy check，循环冗余校验码）：在帧尾加入校验和使追加后的帧可以被生成多项式G(x)除尽。</li>
</ul>
<h2>基本数据链路协议</h2>
<ul>
<li>无限制的单工协议</li>
<li>单工的停-等协议：等待确认</li>
<li>有噪声的单工协议：PAR（positive acknowledgement with retransmission，支持重传的肯定确认协议）又称ARQ（automatic repeat request，自动重复请求协议），确认超时后重传</li>
</ul>
<h2>滑动窗口协议</h2>
<ul>
<li>稍待确认</li>
<li>发送窗口、接收窗口</li>
</ul>
<h3>1位滑动窗口协议</h3>
<ul>
<li>收到确认后发送下一帧</li>
</ul>
<h3>使用回退n帧技术的协议</h3>
<ul>
<li>回避往返延时</li>
<li>管道化技术：管道容量=带宽*往返延迟</li>
<li>回退n帧：接收方只接受下一帧</li>
<li>选择性重传：接收方缓存错误帧后的所有帧</li>
<li>否定的确认帧（NAK，negative acknowledgement）：避免发送方等待确认超时</li>
</ul>
<h2>协议验证</h2>
<h3>有限状态机模型</h3>
<ul>
<li>可达性分析、协议机、初始状态</li>
<li>模型内容</li>
<li>S：进程与信道可能的状态集合</li>
<li>M：能在信道上进行交换的帧的集合</li>
<li>I：进程初始状态的集合</li>
<li>T：状态之间转换的集合</li>
</ul>
<h3>Peri网模型</h3>
<ul>
<li>模型内容</li>
<li>库所（place）：状态</li>
<li>变迁（transition）</li>
<li>弧（arc）</li>
<li>标记（token）：系统当前的状态</li>
<li>转换用垂直或水平线表示，标记用粗黑点表示，库所用圆圈表示，</li>
<li>激活的转换：转换的输入库所中有至少一个输入标记。激活的转换随时可以激发。</li>
<li>文法：转换用箭头表示，两边为输入输出库所，每一转换对应一条文法。eg. BD-&gt;AC</li>
</ul>
<h2>数据链路层协议示例</h2>
<h3>HDLC</h3>
<ul>
<li>历史</li>
<li>IBMSDLC（synchronous data link control，同步数据链路控制）协议</li>
<li>ADCCP（advanced data communication control procedure，高级数据通信控制规程）：ANSI修改</li>
<li>HDLC（high-level data link control，高级数据链路控制）：ISO修改</li>
<li>CCITT采纳并修改HDLC作为LAP（link access procedure，链路访问规程），及LAPB</li>
<li>面向位的协议的帧结构：分界标志序列+地址+控制+数据+校验和+分界标志序列</li>
<li>三种帧：信息帧、管理帧、无序号的帧</li>
</ul>
<h3>Internet 中的数据链路层</h3>
<ul>
<li>internet连接过程：PC中使用TCP/IP的进程-&gt;调制解调器-&gt;拨号电话线（使用PPP的TCP/IP连接）-&gt;调制解调器-&gt;路由器-&gt;路由选择进程...</li>
<li>PPP（point-to-point protocol，点到点的协议）功能</li>
<li>成帧的方法：无歧义分割、错误检测</li>
<li>链路控制协议：LCP（link control protocol）</li>
<li>协商网络层选项的方法：对每一支持的网络层给出NCP（network control protocol，网络控制协议）</li>
<li>PPP帧格式与HDLC非常相似</li>
</ul>
<h1>介质访问控制子层</h1>
<ul>
<li>MAC（medium access control）：用于确定多路访问信道的下一个使用者，属于数据链路层底下部分。用于LAN中，而WAN是用点对点连接（卫星除外）</li>
</ul>
<h2>信道分配问题</h2>
<ul>
<li>LAN与MAN中静态信道分配方案：多用FDM，只能满足少数目拥有繁重任务的用户。</li>
<li>LAN与MAN中动态信道分配方案：5个假设：站（终端）模型、单信道假设、冲突假设、持续时间/分槽时间、载波监测/无载波检测。</li>
</ul>
<h2>多路访问协议</h2>
<h3>ALOHA</h3>
<ul>
<li>纯ALOHA：随时发送，检测到冲突（或未收到确认）则等待随机时间，尝试再次发送</li>
<li>分槽ALOHA：等待下一时槽开始时才发送</li>
</ul>
<h3>载波检测多路访问协议</h3>
<ul>
<li>1-持续CSMA（carrier sense multiple access）：持续检测信道，空闲则立即发送，冲突后等待随机时间后，再次检测和发送</li>
<li>非持续的CSMA：检测到信道空闲则发送，信道占用则等待随机的时间后重复算法</li>
<li>p-持续CSMA：检测到空闲，p的可能性发送，1-p的可能性延迟到下一时槽，重复该算法</li>
<li>冲突检测的CSMA（CSMA/CD，CSMA with collision detection）：传送过程中检测到冲突则立即放弃任务</li>
</ul>
<h3>无冲突的协议</h3>
<ul>
<li>位图协议（一种预留协议，reservation protocol）：每个竞争周期包含N个时槽，j号站要发送则在j时槽传送1位（此时槽j号站专有），这是所有站按照此队列进行传送，都结束后开始另一个N位竞争周期。</li>
<li>二进制倒计数（binary countdown）协议：要传送的站以二进制传送自己地址（从高位开始），然后取或运算，如果一个站看到自己的高位被改为1则放弃传送。</li>
</ul>
<h3>有限竞争协议</h3>
<ul>
<li>负载轻时竞争方法更理想；负载重是无冲突协议更好，结合起来形成有限竞争协议（limited-contention protocol）</li>
<li>自适应树搜索协议（深度优先）：0号时槽，所有站尝试获得信道；若冲突则1号时槽只有左支可以竞争；直到没有冲突，左支某站获得信道，下一时槽只允许右枝竞争。</li>
</ul>
<h3>波分多路访问协议 WDMA（wavelength division multiple access）</h3>
<ul>
<li>一个固定波长接收器：监听控制信道</li>
<li>一个可调波长发送器：在其他站的控制信道发送信息</li>
<li>一个固定波长发送器：发送数据</li>
<li>一个可调波长接收器：选择监听一个数据发送器</li>
</ul>
<h3>无线LAN协议</h3>
<ul>
<li>隐藏站问题：A检测到B而检测不到C，错误滴认为可以与B通信</li>
<li>暴露站问题：A检测到介质中B与C的通信，错误的认为不能与D通信</li>
<li>MACA（multiple access with collision avoidance，避免冲突的多路访问）：A给B发送RTS（request to send），B以CTS（clear to send）应答，这两帧均包含数据长度；此时听到RTS和CTS的站保持足够时间的沉默。</li>
<li>MACAW（MACA for wireless）：引入ACK帧，及时重传。</li>
</ul>
<h2>以太网</h2>
<h3>以太网电缆</h3>
<ul>
<li>10Base5 粗同轴电缆（粗以太网），使用插入式分接头，在10Mbps上可支持500m</li>
<li>10Base2 细同轴电缆（细以太网），BNC连接器（T型接头），这两种通过时间域反射计检测故障。</li>
<li>10BaseT 双绞线，通过集线器连接</li>
<li>10BaseF 光纤，支持上千米。每一版本的网络都可以通过中继器（repeater）扩大范围。</li>
<li>100BaseT4 3类UTP</li>
<li>100BaseTX 全双工，5类UTP</li>
<li>100BaseFX 全双工，长距离，两根多模光纤</li>
<li>1000Base-SX 多模光纤</li>
<li>1000Base-LX 单模或多模光纤</li>
<li>1000Base-CX 两对STP（shield twisted pair，屏蔽双绞线）</li>
<li>1000Base-T 四对5类UTP</li>
</ul>
<h3>编码</h3>
<ul>
<li>曼彻斯特编码：1（高电压+低电压）、0（低电压+高电压）</li>
<li>差分曼彻斯特编码：间隔起始处没有相变为1，相变为0</li>
</ul>
<h3>太网的性能</h3>
<ul>
<li><p>二元指数后退法：第i次冲突后，随机等待0~2^i-1个时槽</p>
</li>
<li><p>交换式以太网：核心为交换机，每块插卡构成自己的冲突域</p>
</li>
</ul>
<h3>逻辑链路控制子层</h3>
<ul>
<li>LLC（logical link control）：IEEE 802.2，与MAC构成数据链路层</li>
</ul>
<h2>无线LAN</h2>
<h3>802.11物理层</h3>
<ul>
<li>红外线：1M和2Mbps</li>
<li>FHSS（frequency hopping spread spectrum，调频扩频），使用79个信道，停延时间小于400ms，对多径衰减有很好的抵抗能力</li>
<li>DSSS（direct sequence spread spectrum，直接序列扩频）：使用巴克序列，每一位需要11个时间片</li>
<li>OFDM（orthogonal frequency division multiplexing，正交频分多路复用）：802.11a，54Mbps，52个频率</li>
<li>HR-DSSS（high rate direct sequence spread spectrum，高速率的直接序列扩频）：802.11b，支持1、2、5.5、11Mbps；802.11g为802.11b的增强版本，理论速度为54Mbps。</li>
</ul>
<h3>802.11 MAC子层</h3>
<ul>
<li>DCF（distributed coordination function，分布式协调功能），使用CSMA/CA协议，支持两种操作方法</li>
<li>信道监听：空闲则送出整个帧，冲突后采用二元指数后退法计算等待时间</li>
<li><p>虚拟信道监听：以MACAW为基础，NAV（network allocation vector，网络分配向量）</p>
</li>
<li><p>PCF（point coordination function，点协调功能）：周期性广播信标帧（调频和停延时间、时钟同步等）</p>
</li>
<li>PCF与DCF同时运行，4种间隔：</li>
<li>SIFS（short interframe spacing，短帧间间隔）：允许一个会话中各部分有机会首先被送达</li>
<li>PIFS（PCF interframe spacing，PCF帧间间隔）：若SIFS后得到授权的站未开始传送，则基站可能广播信标帧或表决帧</li>
<li>DIFS（DCF interframe spacing，DCF帧间间隔）：若基站未有动作，任一站开始尝试得到信道，冲突采用二元指数后退法</li>
<li>EIFS（extended interframe spacing，扩展帧间间隔）：收到坏帧和未知帧的站使用这个间隔</li>
</ul>
<h3>服务</h3>
<ul>
<li>分发服务：基站提供</li>
<li>关联：连接到基站</li>
<li>分离：解除与基站的联系</li>
<li>重新关联：改变首选基站</li>
<li>分发：如何路由发送给基站的帧</li>
<li>融合：翻译非802.11网络的帧</li>
<li>站服务：单元内部进行</li>
<li>认证：联系基站，确认新进入的站通过了基站的认证</li>
<li>解除认证：离开网络</li>
<li>私密性：指定使用RC4加密算法</li>
<li>数据投递：参考以太网的模型，不保证可靠性，由上层处理检错和纠错</li>
</ul>
<h2>宽带无线网络</h2>
<ul>
<li>802.16：无线MAN，或无线本地回路，包括数据链路层与物理层</li>
<li>带宽分配：FDD（frequency division duplexing，频分双工制）；TDD（time division duplexing，时分双工制）</li>
</ul>
<h2>蓝牙技术 802.15</h2>
<ul>
<li>微微网：蓝牙系统的基本单元。微微网中有一个主节点，可以有7个活动的从节点，255个静观节点。</li>
<li>分散网：一组互相连接的微微网，通过当作桥的从节点连接</li>
<li>应用轮廓：一般访问、服务发现、串行端口、一般的对象交换、LAN访问……</li>
<li>协议栈：物理层（物理无线电、基带）-&gt;数据链路层（基带、链路控制）-&gt;中间件层（电话、服务发现）-&gt;应用程序（应用轮廓）</li>
</ul>
<h2>数据链路层交换</h2>
<ul>
<li>802.x到802.y的网桥：在LLC层进行翻译</li>
<li>本地网络互连：网桥使用扩散算法、逆向学习法</li>
<li>生成树网桥：，采用序列号生成树，低位变为根；解决并行的透明网桥产生的回路</li>
<li>远程网桥：采用PPP协议，将完整的MAC帧放入净荷域</li>
<li>交换设施区别：物理层（转发器、集线器）；数据链路层（网桥、交换机）；网络层（路由器）；传输层（传输网关）；应用层（应用网关）<br>*虚拟LAN（VLAN）</li>
<li>通过网桥或交换机的配置表来路由</li>
<li>每个端口分配一个VLAN颜色：VLAN所有机器在统一端口才可以</li>
<li>每个MAC地址分配一个VLAN颜色：从帧中提出MAC地址进行匹配</li>
<li>每个3层协议或IP分配一个VLAN颜色：须检查净荷域</li>
<li>IEEE 802.1Q：改变以太网的帧头、可理解VLAN的交换机</li>
</ul>
<h1>网络层</h1>
<h2>设计要点</h2>
<ul>
<li>存储-转发分组交换</li>
<li>向传输层提供服务：独立于路由器技术、路由器数量类型拓扑关系对传输层不可见、跨越多个LAN和WAN进行统一编址</li>
<li>无连接服务的实现：数据报、数据报子网</li>
<li>面向连接服务的实现：虚电路（VC，virtual circuit）、虚电路子网；要求建立电路、路由器建立表项、分组只含VC号而不需目标和源地址、路由失效将终止、容易实现服务质量和拥塞控制</li>
</ul>
<h2>路由算法</h2>
<ul>
<li>路由：确定该使用哪一条路径</li>
<li>转发：当一个分组到达时所采取的的动作</li>
<li>自适应算法：会根据拓扑结构和流量的变化改变路由决策</li>
<li>非自适应算法：不会根据当前测量或者估计的流量和拓扑结构，来调整它们的路由决策（静态路由）</li>
<li>会话路由：虚电路子网中路由，当建立虚电路时才需要确定路由路径</li>
</ul>
<h3>优化原则</h3>
<ul>
<li>最优化原则：如果路由器J在I到K的最优路径上，则J到K的最优路径也必定沿着同样的路由路径。</li>
<li>汇集树：从所有的源到一个制定目标的最优路径的集合构成以目标节点为根的树。</li>
</ul>
<h3>最短路径路由</h3>
<ul>
<li>跳数、物理距离、延迟</li>
<li>Dijkstra标记算法：两个节点间最短路径的算法，初始时所有节点的标记（从源节点沿着当前已知的最佳路径到达该节点的距离）都是暂时的，当已经发现一个标记代表了最短可能路径的时候，标记被变为永久的（以后不再改变）</li>
</ul>
<h3>扩散算发</h3>
<ul>
<li>同样为静态的路由算法</li>
<li>每一个进来的分组都被发送到除了进来的那条路线之外的每一条输出线路上。</li>
<li>抑制扩散过程</li>
<li>分组头包含跳计数器，初始值等于源于目标间路径长度或最坏情形下的长度（子网直径）</li>
<li>分组头包含序列号，让路由记录已经被扩散过的分组</li>
<li>选择性扩散：只输出到大概方向正确的线路上</li>
<li>扩散法并不实用，但其高度健壮性可用于军事用途</li>
</ul>
<h3>距离矢量路由</h3>
<ul>
<li>属于动态的路由算法</li>
<li>每个路由器维护一张表（即一个矢量），列出已知目标的最佳距离及线路，通过与邻居交换信息不断更新</li>
<li>Bellman-Ford 路由算法、Ford-Fulkerson算法</li>
<li>无穷计算问题：X告诉Y它有一条路径的时候，Y无法知道自己是否在这条路径上。每次更新列表，坏消息扩散一步，直至无穷大。</li>
</ul>
<h3>链路状态路由</h3>
<p>路由器的工作分为5个部分</p>
<ul>
<li>发现邻居节点：启动时发送HELLO分组给邻居，邻居以其网络地址应答</li>
<li>测量线路开销：发送ECHO分组，得到邻居节点的延迟</li>
<li>创建链路状态分组：包括发送方标识、序列号、年龄、邻居及其延迟列表</li>
<li>发布链路状态分组：扩散法</li>
<li>序列号回转，采用32位序列号</li>
<li>路由器崩溃，从0开始的下一分组将被作为重复分组而拒绝</li>
<li>序列号破坏，将作为过时分组而拒绝</li>
<li>计算新的路由路径：获得所有链路状态分组后，运行Dijkstra算法构建出到所有可能目标的最短路径</li>
</ul>
<p>另一路由状态协议是IS-IS（intermediate system-intermediate system，中间系统对中间系统），原用于DECnet、NSFNET骨干网、CDPD、Novell Netware（使用变种NLSP来路由IPX分组），后被ISO采纳为无连接网络层协议CLNP，后被多次修改，如IP协议。</p>
<p>OSPF采纳了IS-IS，但IS-IS编码方法支持携带多个网络层协议的信息，二OSPF不具备这样的特性。</p>
<h3>分级路由</h3>
<p>路由器被划分为区域（region），区域被组织为群（cluster），群被组织为区（zone），区被组织为组（group）。路由器只知道自己所在区域的目标地址。</p>
<h3>广播路由</h3>
<ul>
<li>广播：同时将所有目标发送一个分组</li>
<li>实现方法</li>
<li>源机器给每一目标单独发送</li>
<li>扩散法</li>
<li>多目标路由：只给必要的路线发送</li>
<li>汇集树</li>
<li>逆向路径转发：如果通过常用发送分组的线路到达，则认为是第一份副本并转发</li>
</ul>
<h3>多播路由</h3>
<ul>
<li>只给一组目标发送，而不是发送给所有目标</li>
</ul>
<h3>移动主机路由</h3>
<ul>
<li>主场所：主机的永久性地址</li>
<li>外部代理：记录当前访问该区域的移动主机</li>
<li>本地代理：记录主场所在这个区域，当前正在访问其他区域的主机</li>
</ul>
<h3>Ad Hoc 网络中的路由</h3>
<ul>
<li>每个节点包含一个主机和一个路由器，节点两两相邻，则成为Ad Hoc网络或MANET（mobile ad hoc networks，移动Ad Hoc 网络）</li>
<li>AODV（ad hoc on-demand distance vector）路由算法：类似Bellman-Ford距离矢量算法</li>
<li>路径发现</li>
<li>路径维护：活动邻居</li>
</ul>
<h3>对等网络中的节点查询</h3>
<ul>
<li>节点标识符：IP地址的160位散列值</li>
<li>键：记录名字的160位散列值，该记录的索引关联信息保存在对应标识符的节点上</li>
<li>successor(i)返回从i开始第一个实际节点的标识符</li>
<li>指取表：加快了搜索目标节点IP的过程</li>
</ul>
<h2>拥塞控制算法</h2>
<h3>通用原则</h3>
<ul>
<li>监视系统，检测何时何地发送了拥塞</li>
<li>将该信息传递到能够采取行动的地方</li>
<li>调整系统运行</li>
</ul>
<h3>拥塞预防策略</h3>
<ul>
<li>传输层：重传、乱序缓存、确认、流控制、确认超时</li>
<li>网络层：子网内部的虚电路与数据报、分组排队和服务、分组丢弃、路由算法、分组生存期管理</li>
<li>数据链路层：重传、乱序缓存、确认、流控制</li>
</ul>
<h3>虚电路子网中的拥塞控制</h3>
<ul>
<li>准入控制</li>
</ul>
<h3>数据报子网中的拥塞控制</h3>
<p>每条线路关联一个变量 u新 = a u旧 + (1-a)f，a表示了路由器忘记历史有多快</p>
<ul>
<li>警告位：位于分组头，分组到达目标端后，传输实体将警告位复制到下一确认分组，源主机因此削减流量</li>
<li>抑制分组：路由器直接给源主机送回一个抑制分组 （choke packet）</li>
<li>逐跳（hop-by-hop）抑制分组：影响沿途的每一跳，收到抑制分组的路由立即减慢该方向的分组（要求分配更多的缓冲区）</li>
</ul>
<h3>负载丢弃</h3>
<ul>
<li>随机的早期检测：RED（random early detection，随机的早期检测）算法，在恶化之前开始丢弃分组</li>
</ul>
<h3>抖动控制</h3>
<p>每一跳都记录期望传输时间，到达晚了就尽快转发，否则多停留一段时间</p>
<h2>服务质量</h2>
<h3>好的服务质量所使用的技术</h3>
<ul>
<li>过度提供资源</li>
<li>缓冲能力：接收方在递交数据前缓存起来</li>
<li>流量整形：在服务器段进行平滑处理；服务等级协定（承运商与顾客）、流量监管（对业务流进行监视）</li>
<li>漏桶算法：Turner（1986），常数服务时间的单服务器排队系统</li>
<li>令牌桶：每隔一段时间产生令牌，每送出去一个分组，计数器减一，到零时不再发送分组。令牌足够时以最大速度输出，此后为令牌产生速度</li>
<li>资源预留：带宽、缓冲区空间、CPU周期</li>
<li>准入控制</li>
<li>比例路由：分散流量到多条路径</li>
<li>分组调度：流之间公平排队、加权的公平排队</li>
</ul>
<h3>综合服务</h3>
<ul>
<li>基于流的算法或综合服务（RFC2205~2210）：流式多媒体的体系结构</li>
<li>资源预留协议（resource reservation protocol，RSVP）</li>
</ul>
<h3>区分服务</h3>
<ul>
<li>基于类别的服务质量（相对于基于流的服务质量）</li>
<li>快速型转发：另外的通道</li>
<li>确保行转发：确保不会丢弃分组</li>
</ul>
<h3>标签交换和MPLS</h3>
<ul>
<li>MPLS（multiprotocol label switching，多协议标签交换）：RFC 3031，在数据链路层之上添加MPLS头</li>
<li>MPLS与VC（虚电路）区别</li>
<li>MPLS 将多个发往同一目标的分组组合起来（虚电路做不到）</li>
<li>建立转发表</li>
<li>虚电路：在建立连接时发送setup packet到网络中建立转发表</li>
<li>MPLS：</li>
<li>数据驱动：分组到来时，联系下一跳生成这一分组流（FEC，forwarding equivalence class，转发等价类）的标签；使用有色绳索来避免环</li>
<li>控制驱动：路由启动时，检查哪些路由路径中自己是最终目标，然后为该路径建立FEC（forwarding equivalence class，转发等价类）并分配标签，将标签传递给邻居，传给所有的路由器</li>
</ul>
<h2>网络互联</h2>
<ul>
<li>多协议路由器</li>
<li>面向连接的网络互联：级联虚电路</li>
<li>无连接的网络互联：数据报模型</li>
<li>隧道技术：将IP分组插入WAN网络层分组净荷域中发送</li>
<li>互联网路由：内部网关协议、外部网关协议、自治系统（AS，autonomous system）</li>
<li>分段：每个网络会限制分组的最大长度</li>
</ul>
<h2>Internet上的网络层</h2>
<p>原则</p>
<ul>
<li>保证它能够工作</li>
<li>尽可能使它简单</li>
<li>作出明确的选择</li>
<li>尽可能做到模块化</li>
<li>期望具备异构性</li>
<li>避免使用固定不变的选择和参数</li>
<li>寻找一个好的设计，它不必是最完美的</li>
<li>对于发送操作一定要严格，而对于接收操作要有一定的容忍度</li>
<li>要考虑伸缩性</li>
<li>要考虑性能和代价</li>
</ul>
<h3>IP协议</h3>
<ul>
<li>IPV4头：版本、IHL、服务类型、总长度、标识、DF、MF、分段偏移、生命期、协议、头部校验和、源地址、目的地址、选项</li>
</ul>
<h3>IP地址</h3>
<ul>
<li>分类的编制方案（classful addressing）</li>
<li>A类：0+网络+主机；1.0.0.0~127.255.255.255</li>
<li>B类：10+网络+主机；128.0.0.0~191.255.255.255</li>
<li>C类：110+网络+主机；192.0.0.0~223.255.255.255</li>
<li>D类：1110+多播地址；224.0.0.0~239.255.255.255</li>
<li>E类：11110+保留将来使用；240.0.0.0~247.255.255.255</li>
<li>网络号管理：ICANN（internet corporation for assigned names and numbers）</li>
<li>点分十进制标记法</li>
<li>子网：通过子网掩码分别路由</li>
<li>CIDR-Classless InterDomain Routing（无类别域间路由）：RFC 1519，将剩余的IP地址以可变大小块的方式进行分配，而不管它们所属的类别；聚集表项（用二进制地址与掩码标识一组IP地址）</li>
<li>NAT-网络地址转换</li>
<li>为每个公司分配一个IP地址用于传输Internet流量；公司内部用每台计算机唯一的IP地址常用来传输内部流量。</li>
<li>三段保留的IP地址范围如下，包含这些地址的分组不应出现在Internet上</li>
<li>10.0.0.0-10.255.255.255/8</li>
<li>172.16.0.0-172.31.255.255/12</li>
<li>192.168.0.0-192.168.255.255/16</li>
<li>操作方式：IP分组大多携带UDP或TCP净荷，从中提出目标端口和源端口进行一次转换，以TCP为例</li>
<li>请求建立TCP连接时，替换TCP的源地址与源端口，替换IP与TCP头部校验和，建立源地址与源端口的表项（共65535个）</li>
<li>IP分组到达时，取出TCP的目标端口，查找对应的内部IP表项，替换目标端口与目标地址，替换IP与TCP头部校验和，转发给内部主机</li>
</ul>
<h3>Internet 控制协议</h3>
<ul>
<li>Internet 控制消息协议（ICMP，internet control message protocol）：报告Internet有关事件</li>
<li>ARP-地址解析协议（address resolution protocol）</li>
<li>要发送分组的主机首先发送一个广播分组到以太网络，询问IP对应的以太网地址，只有拥有该IP的主机以其以太网地址应答</li>
<li>优化：1.缓存结果；2.机器启动时广播地址映射，请求查询自己的IP，检测有无冲突（应答）</li>
<li>RARP（reverse address resolution protocol，反向地址解析协议）：机器启动时询问自己IP，RARP服务器送回它的IP。因受限的广播（全1的目标地址）不会被路由转发，每个网络都需要一个RARP服务器。</li>
<li>BOOTP：RFC951、1048、1084，机器启动时使用UDP分组来询问自己IP。新加入的主机要系统管理员为它分配IP地址并加入BOOTP配置文件。</li>
<li>DHCP（dynamic host configuration protocol，动态主机配置协议）：RFC 2131、2132，允许手工分配IP，也允许自动分配。也通过广播发送请求，每一网络有一DHCP中继代理（relay agent），主机先广播DHCP DISCOVER分组，DHCP中继代理单播给DHCP服务器，进而获得IP地址。租用：主机需在租用期到达之前申请续租，否则将释放其IP。</li>
</ul>
<h3>OSPF-内部网关路由协议</h3>
<ul>
<li>OSPF（open shortest path first）将每个AS划分为编号的区域（area），每个AS有一骨干网络（backbone area），编号为0.</li>
<li>OSPF区分4种路由器：</li>
<li>内部路由器：完全在一个区域内部</li>
<li>区域边界路由器：连接两个或多个区域</li>
<li>骨干路由器：位于骨干区域上</li>
<li>AS边界路由器：与其他AS中的路由器进行通信</li>
<li>邻接的：OSPF要求每个LAN中选举出一台指派路由器（designated router），该路由器与该LAN上所有其他路由器都是邻接的</li>
</ul>
<h3>BGP-外部网关路由协议</h3>
<ul>
<li>BGP（border gateway protocol）将网络分为三种：末端网络（与BGP图只有一个连接）、多连接网络（一般可用来传输中转流量）、穿越网络（愿意处理第三方分组，不过有限制条件）</li>
<li>BGP路由间通过TCP连接通信</li>
</ul>
<h3>Internet 多播</h3>
<ul>
<li>IP通过D类地址来支持多播，要通过特殊的多播路由器</li>
<li>IP支持两种组地址</li>
<li>永久地址</li>
<li>224.0.0.1 一个LAN上的所有系统</li>
<li>224.0.0.2 一个LAN上的所有路由器</li>
<li>224.0.0.5 一个LAN上的所有OSPF路由器</li>
<li>224.0.0.6 一个LAN上的所有指派路由器</li>
<li>临时组：进程要求主机加入或离开某个组，主机记录它的进程属于哪个组</li>
<li>查询和应答分组使用IGMP（internet group management protocol）协议</li>
</ul>
<h3>移动IP</h3>
<ul>
<li>可通过主动ARP（gratuitous ARP）更新路由器的映射缓存</li>
<li>外部代理通过定时发送广告分组（advertisement）来通知新进入的主机</li>
</ul>
<h3>IPv6</h3>
<ul>
<li>IPv6为IEEE Network发表的SIPP（simple internet protocol plus，增强的简单Internet协议）</li>
<li>IPv6头部：版本、流量类别、流标签、净荷长度、下一个头、跳数限制、源地址、目标地址</li>
<li>扩展头部：为兼容IPv4，跟在固定头部的后面（可以有多个）</li>
<li>16字节固定长度编址</li>
</ul>
<h1>传输层</h1>
<h2>传输服务</h2>
<h3>向上层提供的服务</h3>
<ul>
<li>传输实体：传输层内部，利用网络层提供的服务，向它的用户提供高效、可靠和性价比合理的服务的硬件/软件</li>
<li>传输服务提供者、传输服务用户</li>
</ul>
<h3>传输服务原语</h3>
<ul>
<li>LISTEN、CONNECT、SEND、RECEIVE、DISCONNECT</li>
<li>TPDU（transport protocol data unit，传输协议数据单元）：从传输实体发送到另一个传输实体的消息。</li>
</ul>
<h3>伯克利套接字（berkeley socket）</h3>
<ul>
<li>Berkeley UNIX使用的TCP socket原语：SOCKET、BIND、LISTEN、ACCEPT、CONNECT、SEND、RECV、CLOSE</li>
</ul>
<h2>传输协议的要素</h2>
<h3>编址</h3>
<ul>
<li>为监听连接请求的进程定义相应的传输地址，Internet：端口（port）；ATM：AAL-SAP；一般术语：TSAP（transport service access point，传输服务访问点）</li>
<li>同样，网络层的端点称为NSAP（network service access point，网络服务访问点），IP为一个特例。</li>
<li>初始连接协议：采用进程服务器为那些较少使用的服务器提供代理功能（监听一组端口），请求到达时启动相应的服务器，继承与客户的连接。</li>
<li>名字服务器（目录服务器）：在特殊硬件运行，不能在用户通话时临时创建</li>
</ul>
<h3>建立连接</h3>
<ul>
<li>分组生存周期：受限制的子网设计、分组设置跳计数器、分组时间戳</li>
<li>TPDU编号，相等编号的TPDU不会同时有效，序列号空间应足够大，序列号回绕时同样编号的TPDU都已经消失</li>
</ul>
<h3>释放连接</h3>
<ul>
<li>两军队问题</li>
</ul>
<h3>流控制和缓冲</h3>
<h3>多路复用</h3>
<ul>
<li>向上多路复用：传输实体将TPDU交给上层指定的进程</li>
<li>向下多路复用：将流量分布到多个网络连接</li>
</ul>
<h3>崩溃恢复</h3>
<h2>有限状态机描述传输协议</h2>
<h2>Internet 传输协议-UDP</h2>
<h3>UDP介绍</h3>
<ul>
<li>UDP（User Datagram Protocol，用户数据报协议）数据段由8字节头和净荷域构成。</li>
<li>UDP头：源端口、目标端口、UDP长度、UDP校验和</li>
</ul>
<h3>远过程调用</h3>
<ul>
<li>RPC（remote procedure call，远过程调用）：让远程调用像本地过程调用一样，客户程序需要绑定一个小的库过程（客户存根），服务器程序绑定一个服务器存根。</li>
<li>参数包装：列集（marshaling）</li>
</ul>
<h3>实时传输协议</h3>
<ul>
<li>RTP（real-time transport protocol，实时传输协议）：RFC 1889</li>
<li>用户空间（多媒体应用-&gt;RTP）-&gt;套接字接口-&gt;操作系统内核（UDP-&gt;IP-&gt;以太网）</li>
<li>RTCP（realtime transport control protocol，实时传输控制协议）：处理反馈、同步和用户界面等。</li>
</ul>
<h2>Internet 传输协议-TCP</h2>
<ul>
<li>TCP（transport control protocol，传输控制协议）：在不可靠的互联网络提供一个可靠的端到端字节流。</li>
<li>TCP服务模型：16位端口，1024以下为知名端口</li>
<li>守护进程（unix中称inetd，internet daemon）：同时关联到多个端口，连接进入时fork出新的进程</li>
<li>紧急数据：URGENT标记</li>
<li>TCP数据段（TCP segment）；MTU（maximum transfer unit，最大传输单元），以太网通常为1500字节净荷。</li>
<li>TCP数据段（包括20字节的头）：源端口、目标端口、序列号、确认号、TCP长度、URG、ACK、PSH、PST、SYN、FIN、窗口大小、校验和、紧急指针、可选项、数据</li>
<li>TCP连接的建立：SYN(SEQ=x)-&gt;SYN(SEQ=y, ACK=x+1)-&gt;SYN(SEQ=x+1, ACK=y+1)</li>
<li>TCP传输策略：Nagle算法，数据进入发送方后只发送第一字节，其后的字节缓冲起来，直到第一字节被确认为止。</li>
<li>TCP拥塞控制：网络容量（拥塞窗口）、接收方容量（接收方准许窗口）、慢启动法、阈值</li>
<li>TCP定时器管理：重传定时器、持续定时器（确认超时的探询消息）、保活定时器（一段时间后发送，对方不应答则终止连接）</li>
<li>无线TCP和UDP：间接TCP、同质的网络</li>
<li>事务型TCP：用UDP来实现RPC的高效率，用TCP实现可靠性，T/TCP（transaction TCP，事务型TCP）；SCTP（stream control transmission protocol，流控制传输协议）</li>
</ul>
<h2>性能问题</h2>
<p>广播风暴、带宽-延迟乘积</p>
<h3>网络性能的测量</h3>
<ul>
<li>确保样本空间足够大</li>
<li>确保样本具有代表性</li>
<li>使用粗粒度时钟时要谨慎</li>
<li>确保在测试过程中不会发生不可预知的事情</li>
<li>缓存机制可能会破坏测量的正确性</li>
<li>理解所测量的指标</li>
<li>在往外推广结果时要谨慎</li>
</ul>
<h3>具有更好性能的系统设计</h3>
<ul>
<li>CPU速度比网络速度更加重要</li>
<li>减少分组的数量可以减少软件开销</li>
<li>使环境切换的次数减到最少</li>
<li>使复制操作的次数减到最少</li>
<li>可以购买更多的带宽，但无法要求更低的延迟</li>
<li>应该想办法避免拥塞，而不是从拥塞中恢复</li>
<li>避免超时</li>
</ul>
<h3>快速的TPDU处理</h3>
<ul>
<li>分离出正常的发送操作病对它们作特殊处理</li>
</ul>
<h3>针对千兆网络的协议</h3>
<p>旧的协议面临的问题</p>
<ul>
<li>32位序列号：对于1Gbps的以太网，一轮序列号回绕时间为34s，大于internet上最大分组生存周期120s</li>
<li>通信速度的提高比计算速度的提高快得多</li>
<li>如果一条线路的带宽-延迟乘积非常大，则回退n步协议的性能会非常差</li>
<li>千兆位线路本质上不同于1兆位线路，因为长的千兆位线路的主要制约因素是延迟，而不是带宽</li>
<li>对于许多千兆位应用，分组到达时间的偏差与平均延迟本身一样重要</li>
</ul>
<h1>应用层</h1>
<h2>DNS-域名系统</h2>
<ul>
<li>DNS（Domain name system）：RFC 1034、1035，调用解析器（resolver）将名字映射成IP地址</li>
</ul>
<h3>DNS名字空间</h3>
<ul>
<li>DNS名字空间：internet被分为200多个顶级域，每个域被分为若干子域，子域又被进一步划分，以此类推。</li>
<li>顶级域有两种：通用域和国家域</li>
<li>通用域包括com（商业的）、edu（教育性机构）、int（国际性组织）、mil（美国军队）、net（网络供应商）、org（非营利性组织）、biz（商贸）、info（信息）、name（人们的名字）、pro（职业）、aero（航空业）、coop（合作社）、museum（博物馆）</li>
<li>国家域定义在ISO 3166中。</li>
</ul>
<h3>资源记录</h3>
<ul>
<li>每个域都有一组与它相关联的资源记录；当解析器把域名传递给DNS时，DNS所返回的是与该域名相关联的资源记录。</li>
<li>每条资源记录是一个5元组：Domain_name（域名）、Time_to_live（生存期）、class（类别）、type（类型）、value（值）</li>
</ul>
<h3>名字服务器</h3>
<ul>
<li>权威记录：来自于管理该记录的权威机构，因此总是正确的</li>
<li>递归查询：当解析器接收到一个域名查询时，它将该查询传递给本地的一个名字服务器，如果被查询域名落在该名字服务器的管辖范围内，那么返回权威的资源记录；如果本地没有关于它的信息，那么本地名字服务器向顶级名字服务器发送一条查询此域的消息。</li>
<li>LDAP（lightweight directory access protocol，轻量级目录访问协议）：RFC 2251，定位到一般的对象，如人员、资源、服务等。</li>
</ul>
<h2>电子邮件</h2>
<h3>结构与服务</h3>
<ul>
<li>用户代理：阅读和发送电子邮件</li>
<li>消息传输代理：将消息从源端传送到目标端</li>
<li>电子邮件基本功能 </li>
<li>撰写</li>
<li>传输</li>
<li>报告</li>
<li>显示</li>
<li>处理</li>
</ul>
<h3>消息格式</h3>
<ul>
<li>RFC 822：基本ASCII电子邮件</li>
<li>头域：To、Cc、Bcc、From、Sender、Received、Return-Path、Data、Reply-To、Message-Id、In-Reply-To、References、Keywords、Subject</li>
<li>MIME-多用途Internet邮件扩展</li>
<li>头域：MIME-Version、Content-Description、Content-Id、Content-Transfer-Encoding、Content-Type</li>
<li>二进制消息编码（base64编码，又称ASCII盔甲）：0-63分别为A-Z、a-z、0-9、+、/；==与=分别代表一个组只含8位或者16位；对少量非ASCII字符的消息编码效率较低</li>
<li>可打印的引用编码（quoted-printable encoding）：7位的ASCII编码，所有超过127的字符被编码为等号+2个用16进制数字表示的字符值。</li>
</ul>
<h3>消息传输</h3>
<ul>
<li>SMTP（simple mail transfer protocol，简单邮件传输协议） </li>
<li>在25号端口建立TCP连接</li>
<li>命令：HELLO、MAIL FROM、RCPT TO、DATA等</li>
<li>ISP服务器上运行消息传输代理，接收邮件</li>
<li>POP3（post office protocol version 3，邮局协议第三版）</li>
<li>在110端口建立TCP连接</li>
<li>RFC 1939，用户从ISP的消息传输代理获得电子邮件</li>
<li>假设用户每次交互后清除邮箱后脱机工作</li>
<li>IMAP（internet message access protocol，Internet 消息访问协议）</li>
<li>在143端口建立TCP连接</li>
<li>假设用户的邮件会永久地保存在服务器上</li>
<li>投递特性：过滤器、假期守护程序（自动回复）</li>
<li>webmail</li>
</ul>
<h2>万维网</h2>
<h3>结构概述</h3>
<ul>
<li>URL（unform resource locator，统一资源定位符）：命名web页面</li>
<li>组成：协议（也称方案，scheme）+页面所在机器的DNS名字，唯一指定特定页面的本地名字</li>
<li>协议类型：http（hypertext transfer protocol，超文本传输协议）、ftp、file、news（NNTP，network news transfer protocol，网络新闻传输协议）、gopher、mailto、telnet</li>
<li>URN（universal resource name，通用资源名）：RFC 2141，不指定页面所在位置就能够引用页面，可减轻服务器负载</li>
<li>客户端</li>
<li>浏览器运行步骤</li>
<li>确定URL</li>
<li>查询DNS以确定IP</li>
<li>与IP的80端口建立TCP连接</li>
<li>发送请求以获取URL指向的文件</li>
<li>服务器发送文件，释放TCP连接</li>
<li>浏览器显示文件中的文本，取回并显示图片</li>
<li>浏览器扩展</li>
<li>插件：代码模块，浏览器从磁盘取出，安装称自己的一个扩展模块，运行在浏览器内部，完成工作后从浏览器内存中移除掉</li>
<li>辅助应用程序：完整的应用程序，作为独立的进程来运行，接受临时文件的名字来打开文件</li>
<li>服务器端</li>
<li>服务器运行步骤 </li>
<li>接收来自客户（浏览器）的TCP连接</li>
<li>获取所需文件名</li>
<li>从磁盘获取文件</li>
<li>将文件返回给客户</li>
<li>释放TCP连接</li>
<li>服务器场（server farm）</li>
<li>组织：前端连接到一个LAN中，LAN中有一个路由器和若干处理节点（独立的计算机）</li>
<li>TCP移交（TCP handoff）：避免所有请求与回复都通过前端</li>
<li>无状态特性与cookie</li>
<li>RFC 2109：当用户请求web页面时，可以提供附加信息cookie（最大4k）</li>
<li>cookie域：域名、路径、内容、过期时间、安全</li>
<li>非持久的cookie：没有包含过期时间域，浏览器退出时丢弃</li>
<li>持久的cookie：包含过期时间域</li>
</ul>
<h3>静态web文档</h3>
<ul>
<li>HTML（hypertext markup language，超文本标记语言）</li>
<li>表单</li>
<li>XML（extensible markup language，可扩展标记语言）</li>
<li>XSL（extensible style language，可扩展样式语言）</li>
<li>SOAP（simple object access protocol，简单对象访问协议）：应用之间执行RPC（远过程调用）的方法，以XML构造请求，以HTTP发送</li>
<li>XHTML（extended hypertext markup language，扩展的超文本标记语言）：用于小型移动设备，语法更挑剔</li>
</ul>
<h3>动态web文档</h3>
<ul>
<li><p>服务器端动态web页面生成（动态html）：CGI（common gateway interface，公共网关接口）、PHP（hypertext preprocessor，超文本预处理器）、JSP（javaserver pages，java服务器页面）、ASP（active server page，活动的服务器页面，ms版的php和jsp）</p>
</li>
<li><p>客户端动态网页生成：javascript、applet（jvm上运行的java小程序）、activeX控件（ms）</p>
</li>
</ul>
<h3>HTTP-超文本传输协议</h3>
<ul>
<li>连接：HTTP1.0服务器回应后关闭TCP连接；HTTP1.1支持持续连接</li>
<li>方法：GET、PUT、HEAD、POST、DELETE、TRACE、CONNECT、OPTIONS</li>
<li>消息头：请求头、回应头</li>
</ul>
<h3>性能增强</h3>
<ul>
<li>缓存、代理（维护缓存）</li>
<li>服务器复制：镜像、瞬间拥挤</li>
<li>内容分发网络：CDN（content delivery network），图像、音频等大文件存储在CDN上</li>
</ul>
<h3>无线web</h3>
<ul>
<li>WAP（wireless application protocol，无线应用协议）使用新的HTML标准，9600bps，协议层</li>
<li>无线应用环境（WAE)</li>
<li>无线会话协议（WSP）</li>
<li>无线传输协议（WTP）：代替TCP，效率原因</li>
<li>无线传输层安全（WTLS）</li>
<li>无线数据包协议（WDP）：类似UDP</li>
<li>承载层（GSM、CDMA、D-AMPS、GPRS等）</li>
<li>I-Mode（information-mode，信息模式）</li>
<li>对语音信号使用电路交换网络，对数据信号使用分组交换网络</li>
<li>数字网络基于CDMA，手持机使用LTP（lightweight transport protocol，轻量级传输协议）并通过空中链路与协议转换网管通话</li>
<li>软件结构</li>
<li>用户交互模块</li>
<li>插件+cHTML（compact HTML，紧凑的HTML）解释器+Java</li>
<li>简单的窗口管理器</li>
<li>网络通信</li>
<li>实时操作系统</li>
<li>第二代无线web</li>
<li>新特新</li>
<li>推模型和拉模型</li>
<li>运行将电话集成到应用中</li>
<li>多媒体信息</li>
<li>264个象形文字</li>
<li>存储设备接口</li>
<li>浏览器插件</li>
<li>wap2.0支持两种协议栈</li>
<li>XHTML</li>
<li>WSP HTTP</li>
<li>WTP TLS</li>
<li>WTLS TCP</li>
<li>WDP IP</li>
<li>承载层 承载层</li>
</ul>
<h2>多媒体</h2>
<h3>音频压缩</h3>
<ul>
<li>MP3（mpeg audio layer 3，MPEG音频层3）</li>
<li>波形编码：使用较少的傅里叶分量重现波形</li>
<li>感知编码：利用心理声学的频率屏蔽和暂时屏蔽去掉某些分量</li>
</ul>
<h3>流式音频</h3>
<ul>
<li>元文件：将整个音频分为很多元文件，减少缓冲时间</li>
<li>RTSP（real time streaming protocol，实时流协议）：管理用户界面、处理传输错误、解压缩音乐、消除抖动</li>
<li>拉式服务器、推式服务器、低水印标记和高水印标记</li>
</ul>
<h3>IP 语音</h3>
<ul>
<li>H.323：ITU在1996年发布，终端、网守、区域。、H.245（新的压缩算法）、H.225（与网守通信）</li>
<li>SIP（session initiation protocol，会话发起协议）</li>
</ul>
<h3>视频简介</h3>
<ul>
<li>一帧：一次扫描</li>
<li>隔行扫描与逐行扫描</li>
<li>彩色电视系统：SECAM（SEquentiel couleur avec memire，顺序与存储彩色电视系统）、PAL（phase alternating line，逐行倒相制式）、NTSC（national television standards committee，国家电视标准委员会）；亮度、色度</li>
<li>HDTV（high definition television，高清晰度电视）</li>
<li>数字系统</li>
</ul>
<h3>视频压缩</h3>
<ul>
<li>JPEG（joint photographic experts group，联合图像专家族）标准</li>
<li>块准备：四像素取平均值（亮度比色度更敏感）</li>
<li>对每一块作DCT（discrete cosine transformation，离散余弦变换）</li>
<li>量化：将上一步的每个格点乘以对应的权值</li>
<li>减小每一块的(0,0)元素值（DC分量），其他元素称为AC分量</li>
<li>行程编码：同样的值用计数值表示</li>
<li>MPEG（motion picture experts group，运动图像专家组）标准，MPEG-1与JPEG的区别在于运动补偿，包括四种帧</li>
<li>I（帧内编码，intracoded）：JPEG编码的静止图片</li>
<li>P（预测，predictive）：与前一帧之间的逐块差值</li>
<li>B（双向，bidirectional）：与前一帧和后一帧之间的差值</li>
<li>D（DC编码，DC-coded）：用于快进的快平均值</li>
</ul>
<h3>视频点播</h3>
<ul>
<li>准视频点播：在多个频道以某种时差播放同样的视频</li>
<li>线路：视频服务器-&gt;光纤-&gt;ATM或SONET骨干网络-&gt;光纤-&gt;交换机-&gt;区域分布式网络-&gt;消费者房子-&gt;机顶盒</li>
<li>视频服务器</li>
<li>Zipf定律：最受欢迎的那部电影，它的受欢迎程度是第七受欢迎电影的7倍</li>
<li>分层存储：RAM-&gt;磁盘-&gt;DVD-&gt;磁带</li>
<li>磁盘存储</li>
<li>磁盘场（disk farm）：每个驱动器存储一定数量的电影，有重复</li>
<li>磁盘阵列（disk array）或RAID（redundant array of inexpensive disks，廉价磁盘冗余阵列）：每部电影分布在多个驱动器上（条状化，striping）</li>
<li>分发网络：数据源与目标之间交换机和线路的集合</li>
<li>ADSL</li>
<li>FTTC（fiber to the curb，光纤到路边）</li>
<li>FTTH（fiber to the home，光纤到户）</li>
<li>HFC（hybrid fiber coax，混合光纤同轴电缆）</li>
</ul>
<h3>Mbone（multicast backbone，多播骨干网）</h3>
<ul>
<li>Mbone是internet之上的一个虚拟层叠网络</li>
<li>由隧道连接的多个多播岛组成，每个岛有至少一个mrouter（multicast router，多播路由器）</li>
<li>使用基于Bellman-Ford距离矢量算法的路由算法DVMRP（distance vector multicast routing protocol，距离矢量多播路由协议）</li>
<li>PIM（protocol independent multicast，协议无关多播）：AS间的路由，IETF工作组开发</li>
</ul>
<h1>网络安全</h1>
<h2>密码学简介</h2>
<ul>
<li>加密：明文经密钥为参数的函数变换，输出密文</li>
<li>密码编码学、密码分析学、密码术</li>
<li>Kerckhoff原则：所有算法必须是公开的，只有密钥是保密的</li>
<li>含糊的安全性（security by obscurity）：使算法保持秘密</li>
<li>工作因子：密码分析者面对的密钥的复杂性，对于穷举搜索，为密钥长度的指数量级</li>
<li>密码分析问题</li>
<li>只有密文</li>
<li>已知明文（有了一些相匹配的密文和明文）</li>
<li>选择明文（能够加密一些自己选择的明文）</li>
</ul>
<h3>置换密码</h3>
<ul>
<li>保留明文字符顺序，进行明文伪装</li>
<li>凯撒密码（单字母表置换）</li>
<li>字符频率猜测</li>
</ul>
<h3>转置密码</h3>
<ul>
<li>重新排序，不伪装明文</li>
<li>字符频率不变</li>
</ul>
<h3>一次一密</h3>
<p>优点，不可能被破解；缺点，密钥数量限制、密钥流失、丢失字符。</p>
<ul>
<li>量子密码系统：BB84协议</li>
<li>定义</li>
<li>直线基：垂直和水平滤波器</li>
<li>对角基：上述基旋转45度</li>
<li>0与1：每一组基任意分配两个偏振方向为0和1</li>
<li>过程</li>
<li>A与B通信，T在监听</li>
<li>A传送一次性密钥（长度略超过期望长度的2倍）给B，每一位随机选择一个基。</li>
<li>B使用随机的基接收每一位；</li>
<li>B告诉A自己使用的基。</li>
<li>A告诉B哪些是正确的；</li>
<li>A与B使用正确传输的位序作为密钥；</li>
<li>反监听</li>
<li>监听者的密钥不完整。监听者T，对于B基序列中能正确接收的部分，若T与B恰好使用相同的基，则T可以知道该位的密钥；否则T将丢失该位。可经过秘密放大进一步减少T知道的内容。</li>
<li>监听检测。T必须将A的内容转发给B，却不能正确告知B的哪些基是正确的；一位密钥错误相当与B眼中的一位传输错误；A与B使用前向纠错码进行纠错，发现错误率大大超过设备的期望；得知T的存在。</li>
<li>本质</li>
<li>光子遇到与自己偏振方向成45度的滤波器，会随机跳到其中一个且概率相等。</li>
<li>光子不可复制</li>
</ul>
<h3>基本的密码学原则</h3>
<ol>
<li>消息必须包含一定的冗余度：区分有效消息、检测信道</li>
<li>需要采取某种方法对抗重放攻击：新鲜度、时间戳</li>
</ol>
<h2>对称密钥算法</h2>
<ul>
<li>块密码：接受一个n位的明文块作为输入，利用密钥把它变换成n为的密文块</li>
<li>P盒：转置操作，混淆</li>
<li>S盒：置换操作，扩散</li>
<li>乘积密码：一系列的S盒和P盒叠加起来</li>
</ul>
<h3>DES（data encryption standard，数据加密标准）</h3>
<ul>
<li>明文按64位数据块的单元加密，生成64位密文，接受56位密钥，共19个步骤，16次迭代</li>
<li>三重DES：EDE（K1, K2, K1）模式，兼容了DES算法（只需让K1=K2）</li>
</ul>
<h3>AES（advanced encryption standard，高级加密标准）</h3>
<ul>
<li>NIST（national institute of standards and technology，美国标准和技术委员会）在1997年1月发起了密码学竞赛，新标准称为AES，要求</li>
<li>必须是对称的快密码算法</li>
<li>公开所有设计</li>
<li>支持128位、192和256位密钥长度</li>
<li>软件、硬件实现都是可能的</li>
<li>算法必须是公有的</li>
<li>Rijndael：与DES相同，仍使用置换和转置，多轮策略（轮数取决于密钥和块长度）；另外，所有操作都涉及整个字节</li>
</ul>
<h3>密码算法的使用模式</h3>
<p>AES和DES本质上都是置换和转置操作，同样的明文会得到同样的密文</p>
<ul>
<li>ECB模式（electronic code book mode，电子代码薄模式）：分割明文，逐块加密。容易被替换某一块。</li>
<li>密码块链接模式：第一个块与随机IV（initialization vector，初始向量）异或，之后的明文块与前一密文块异或后加密，IV一起传输</li>
<li>密码反馈模式：逐字节加密，不必等64位数据块；密文只有一位偶然翻转，会波及到坏字节在寄存器中时的8个字节</li>
<li>流密码模式</li>
<li>过程：用一个密钥加密一个初始向量生成一个输出块，同样的密钥加密这个输出块产生第二个输出块，以此类推；然后将明文与该密钥流异或得到密文</li>
<li>优点：密钥流仅仅依赖于IV和密钥，不会受到传输错误的影响。</li>
<li>缺点：重复使用（密钥，IV）对，会产生同样的密钥流，会导致密文受到密钥流重用攻击（keystream resuse attack）</li>
<li>计数器模式：除密码薄模式以外的模式中，要想随机访问密文是不可能的</li>
<li>过程：初始向量加常数后进行加密，再与明文异或；每个新的数据块使初始向量递增1</li>
<li>优点：文件中任何地方的块都可以直接解密</li>
<li>缺点：重复使用（密钥，IV）对，会导致密文受到密钥流重用攻击</li>
</ul>
<h3>密码分析</h3>
<ul>
<li>差分密码分析（differential cryptanalysis）：观察少量位差异的明文产生的密文，有些位模式可能比其他位模式更容易出现，这种现象可以导致概率攻击。可用于攻击任何一种块密码算法。</li>
<li>线性密码分析（linear cryptanalysis）：将明文与密文特定位异或，应该一半为0一半为1，而加密过程会引入偏差，这样的偏差总可以降低工作量。只需2^43个已知密文就可以破解DES。</li>
<li>电子功率消耗分析：计算机高电压表示1，低电压表示0，减慢时钟，记录CPU功率</li>
<li>时间分析：if语句的then和else执行时间不同时，减慢时钟可以推断出轮密钥。</li>
</ul>
<h2>公开密钥算法</h2>
<p>加密算法E与解密算法D满足：</p>
<ul>
<li>D(E(P)) = P</li>
<li>从E推断出D极其困难</li>
<li>用选择明文攻击不可能破解E</li>
</ul>
<h3>RSA</h3>
<p>RSA算法建立在分解大素数的基础上，RSA分别为三位发现者名字的首字母</p>
<ul>
<li>计算参数</li>
<li>选择两个大素数p、q（典型情况为1024位）</li>
<li>计算n=p<em>q和z=(p-1)</em>(q-1)</li>
<li>选择一个与z互素的数d</li>
<li>找到e使其满足e*d=1%z</li>
<li>加密</li>
<li>公钥对为(e, n)</li>
<li>将明文分块，每个明文P落在0&lt;=P&lt;n中</li>
<li>计算C=P^e(mod n)</li>
<li>解密</li>
<li>私钥对为(d, n)</li>
<li>计算P=C^d(mod n)</li>
<li>使用：所有人公开自己的加密密钥E，B给A发送Ea(P)，A获得后进行解密P=DaEa(P)</li>
</ul>
<h3>其他的公开密钥算法</h3>
<ul>
<li>主要有两方面的算法</li>
<li>分解大数的困难度</li>
<li>以大素数为模来计算离散对数的困难度</li>
<li>背包算法：“根据给定的总重量找出可能的物品明细列表”被认为是计算上不可行的。该算法与其加强算法相继被S和R破解。</li>
<li>其他：计算离散对数的困难度、基于圆锥曲线</li>
</ul>
<h2>数字签名</h2>
<p>数字签名应满足条件</p>
<ul>
<li>接收方可以验证发送方所宣称的身份</li>
<li>发送方以后不能否认该消息的内容</li>
<li>接收方不可能编造这样的消息</li>
</ul>
<h3>对称密钥签名</h3>
<p>选择一个中心权威机构BB，每个用户选择一个秘密密钥亲手交给BB。A发送A, Ka(B, Ra, t, P)给BB，BB将Kb(A, Ra, t, P, K_BB(A, t, P))给B</p>
<h3>公开密钥数字签名</h3>
<ol>
<li>假设公开密钥算法不仅满足D(E(P))=P，还满足E(D(P))=P</li>
<li>A向B发送 C=Eb(Da(P))</li>
<li>B得到明文 P=Ea(Db(C))</li>
</ol>
<h3>消息摘要</h3>
<ul>
<li>特性<ul>
<li>给定P，很容易计算MD(P)</li>
<li>给定MD(P)，想得到P是不可能的</li>
<li>给定P的情况下，没有人能得到满足 MD(P&#39;)=MD(P) 的P&#39;</li>
<li>输入明文即使只有1位变化，也会导致不同输出</li>
</ul>
</li>
<li>加密摘要比明文快的多，可以加速数字签名算法</li>
<li>MD5<ul>
<li>将明文填补到448位</li>
<li>消息后追加其消息长度（64位整数），此时共512位</li>
<li>取出一个512字节的输入块，通过正弦函数与128位的缓冲区混合，每个输入块执行4轮</li>
<li>128位的缓冲区即为最终的消息摘要</li>
</ul>
</li>
<li>SHA-1（secure hash algorithm 1）：同样按照512字节块处理数据，唯一不同的是生成160位的消息摘要<ul>
<li>利用SHA-1和RSA对非保密的消息进行签名：Alice-&gt;明文P-&gt;SHA-1-&gt;P的散列值H-&gt;RSA(私钥Da)-&gt;签过名的散列值Da(H)-&gt;Bob</li>
</ul>
</li>
</ul>
<h3>生日攻击</h3>
<p>n个输入和k个可能的输出之间存在某种映射关系，公有n(n-1)/2个可能的输入对，若n(n-1)/2&gt;k，则至少有一个匹配的机会是非常大的</p>
<h2>公钥的管理</h2>
<h3>证书</h3>
<p>CA（certification authority，证书权威机构），避免了24小时在线的密钥分发中心</p>
<ul>
<li>生成证书</li>
<li>Alice到CA，出示其公钥和身份，请求证明他的公钥</li>
<li>CA给Alice一个证书，其中包括Alice的身份、CA的私钥对身份散列值的签名</li>
<li>证书验证</li>
<li>Bob计算Alice身份的散列值，与CA的公钥应用在Alice证书的签名上得到的散列值进行比对，因Trudy无法得知CA的私钥，所以他不能对散列值正确地签名</li>
<li>证书格式标准 X.509：ITU1988年通过，采用OSI ASN.1（abstract syntax notation 1，抽象语法标记1）编码</li>
</ul>
<h3>PKI（public key infrastructure，公开密钥基础设施）</h3>
<ul>
<li>信任链（证书路径）：分层的CA，顶级CA负责证明次级CA（又称RA，regional authority，区域权威机构），次级CA负责证明第三级CA，以此类推</li>
<li>信任锚：浏览器预先安装100多个根的公钥</li>
<li>目录（在哪里存放证书）：用户自己存放、DNS服务器存放</li>
<li>撤销：CA定期发布CRL（certificate revocation list，证书撤销列表）</li>
</ul>
<h2>通信安全</h2>
<h3>IPSec</h3>
<ul>
<li>RFC 2401、2402和2406，总是要求加密功能，但允许空算法</li>
<li>IPSec是一个多服务、多算法和多粒度的框架</li>
<li>两种模式</li>
<li>传输模式：直接插在IP头的后面</li>
<li>隧道模式：整个IP分组封装到一个新的新的IP分组中，新分组具有全新的IP头</li>
</ul>
<h3>防火墙</h3>
<p>防火墙包括两部分</p>
<ul>
<li>分组过滤器（网络层）：配置了某些额外功能的标准路由器，负责检查进入和出去的所有分组</li>
<li>应用网关（应用层）：根据头、消息长度，甚至内容决定转发或丢弃</li>
</ul>
<p>DoS（denial of service）攻击：向目标机器发送大量合法的分组，防火墙不能处理；DDoS（distributed denial of service）攻击：大量普通用户的机器被控制而进行DoS攻击</p>
<h3>VPN（virtual private network，虚拟私有网络）</h3>
<p>建立在公共网络上的层叠网络，可利用IPSec实现隧道，将任意两个办公室的流量聚集到一个支持认证和加密功能的SA上</p>
<h3>无线网络安全</h3>
<ul>
<li>802.11安全性：WEP（wired equivalent privacy，相当于有线网络的保密性）为数据链路层安全协议，使用基于RC4的流密码算法</li>
<li>蓝牙安全性：物理层的调频机制提供了一定程度的安全性；设备预先建立好的共享的秘密密钥（passkey，总密钥）；蓝牙的加密算法使用叫做E0的流密码，完整性控制使用SAFER+，两者都是对称密钥快密码算法</li>
<li>WAP2.0安全性：它是基于IP的，可以使用IPSec；传输层可以使用TLS提供保护。</li>
</ul>
<h2>认证协议</h2>
<h3>基于共享秘密密钥的认证</h3>
<ul>
<li>质询-回应协议：容易受到反射攻击</li>
</ul>
<h3>建立一个共享密钥：Diffie-Hellman密钥交换协议</h3>
<ul>
<li>基于大素数分解的困难度，容易受到水桶队列攻击（又称中间人攻击）</li>
</ul>
<h3>使用密钥分发中心的认证协议</h3>
<ul>
<li>重放攻击</li>
<li>Needham-Schroeder认证协议</li>
</ul>
<h3>使用Kerberos的认证协议</h3>
<p>应用在许多实际系统中，如windows2000</p>
<h3>使用公开密钥密码学的认证协议</h3>
<h2>电子邮件安全</h2>
<h3>PGP（pretty good privacy，相当好的隐私）</h3>
<ul>
<li>PGP使用一个称为IDEA（international data encryption algorithm）的块密码算法来加密数据</li>
<li>私钥环：一个或多个本人的公-私钥对</li>
<li>公钥环：与当前用户进行通信的其他用户的公钥</li>
</ul>
<h3>PEM（privacy enhanced mail，增强隐私的邮件）</h3>
<p>像PGP一样，每条消息都使用一次性密钥进行加密，密钥（被RSA或三重DES保护）也被包装到消息中</p>
<h3>S/MIME（Secure/MIME，安全的MIME）</h3>
<ul>
<li>IETF提出</li>
</ul>
<h2>Web 安全</h2>
<h3>安全的命名机制</h3>
<ul>
<li>DNS欺骗</li>
<li>安全的DNS</li>
<li>自证明的名字</li>
</ul>
<h3>SSL（secure sockets layer，安全套接字层）</h3>
<p>在两个套接字之间建立安全的连接，位于应用层与传输层之间</p>
<ul>
<li>客户与服务器之间的参数协商</li>
<li>客户与服务器的双向认证</li>
<li>保密的通信</li>
<li>数据完整性保护</li>
</ul>
<h3>移动代码安全</h3>
<ul>
<li>java applet安全：解释器将其封装到沙箱一边限制它的行为</li>
<li>Active控件：代码签名，认证码</li>
<li>javascript：没有正式的安全模型</li>
<li>病毒：具有繁殖能力，不断复制自己</li>
</ul>
<h2>社会问题</h2>
<h3>隐私</h3>
<ul>
<li>clipper chip（剪切芯片）</li>
<li>key escrow（密钥托管）</li>
<li>电子边境基金会（electronic frontier foundation）</li>
<li>匿名邮件中继器（anonymous remailer）</li>
<li>翻译型的邮件中继器（cypherpunk remailer）</li>
</ul>
<h3>言论自由</h3>
<ul>
<li>信息隐藏学（steganography）</li>
<li>数字水印</li>
</ul>
<h3>　版权</h3>
<ul>
<li>版权（copyright）是对IP（intellectual property，知识产权）的创造者的一种授权</li>
<li>合理使用原则（fair use doctrine）</li>
<li>TCPA（trusted computing platform alliance，可信计算平台联盟）</li>
</ul>


    
      <style>
  /* JiaThis & Uyan bootstrap fix */
	.jiathis_style *, .jiathis_style,
  .jiathis_style_24x24 *, .jiathis_style_24x24{
      -webkit-box-sizing: content-box!important;
      -moz-box-sizing: content-box!important;
      box-sizing: content-box!important;
  }
  .jiathis_style_24x24{
          margin-top: 20px;
  }
</style>


<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24 pull-right">
	<a class="jiathis_button_fb"></a>
	<a class="jiathis_button_linkedin"></a>
	<a class="jiathis_button_googleplus"></a>
	<!--a class="jiathis_button_tsina"></a-->
	<a class="jiathis_button_weixin"></a>
	<!--a href="http://www.jiathis.com/share?uid=1851884" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a-->
	<!--a class="jiathis_counter_style"></a-->
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=1372495112151668" charset="utf-8"></script>
<!-- JiaThis Button END -->


<div class="clearfix"></div>
<hr/>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'harttleland'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
</div>


  </div>

</div>

      </div>
      
    </div>

    <div id="footer">
      <div class="container">
	<div class="credit nowrap">
	  <p class="text-muted" title="Copyright © 2013 Harttle. Hosted by GitHub and powered by Jekyll.">
	    Copyright © 2013 
	    <a href="//harttle.github.io">Harttle</a>. Hosted by
	    <a href="//github.com/" target="_blank">GitHub</a>
	    and powered by
	    <a href="//jekyllrb.com/">Jekyll</a>.
	    
	  </p>
	  <div class="pull-right hidden-xs follow">
	    <a href="https://www.facebook.com/harttle" target="_blank">
	      <i class="fa fa-facebook-square fa-lg"></i>
	    </a>
	    <a href="http://www.linkedin.com/profile/view?id=294339963" target="_blank">
	      <i class="fa fa-linkedin-square fa-lg"></i>
	    </a>
	    <a href="https://plus.google.com/113657098095399233141?rel=author" target="_blank">
	      <i class="fa fa-google-plus-square fa-lg"></i>
	    </a>
	  </div>	  
	</div>
      </div>
    </div>
<!-- content -->

<!-- script -->
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="//oss.maxcdn.com/libs/html5shiv/3.6.2/html5shiv.js"></script>
      <script src="//v3.bootcss.com/docs-assets/js/respond.min.js"></script>
    <![endif]-->
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="/assets/jquery/jquery.scrollUp.min.js"></script>
    <script src="/assets/jquery/jquery.lazyload.min.js" type="text/javascript"></script>
    
    <!-- Bootstrap -->
    <script src="/assets/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    
    
    


<script>
  $(function(){    
    var toc = getTOC($('.post-display .right'));
    if (toc != null) {
      $('.sidebar').append(toc);
      
      //sidebar affix, this offset is for sidebar position recognition
      setTimeout(function () {
          var $sideBar = $('.sidebar')
          $sideBar.affix({
              offset: {                
                  top: function () {                    
                      var offsetTop      = $sideBar.offset().top;
                      var sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10);
                      sideBarMargin     += parseInt($('#page-content').css('margin-top'), 10);
                      return (this.top = offsetTop - navHeight - sideBarMargin);
                  },
                  bottom: function(){
                    var sideBarMargin  = parseInt($sideBar.children(0).css('margin-bottom'), 10);
                    return (this.bottom = footHeight + sideBarMargin);
                  }
              }
          });
      },100);
      
      //sidebar scroll spy
      $('body').scrollspy({
        target: '.sidebar',
        offset: navHeight + 10  //make sure to spy the element when scrolled to
      }); 
    }
    else{
      $('.post-display .right').removeClass('col-md-9');
      $('.post-display').removeClass('row-fluid');
      $('.post-display .left').remove();
    }
  });
  
  //生成目录
  function getTOC($content) {    
    var $toc = $('<ul class="nav level-0" >').addClass("nav sidenav");

    var base_level = 1;
    while ($content.find('h' + base_level).length < 1 && base_level < 7) base_level += 1;
    if (base_level == 7) return null;
    
    $content.find(':header').each(function (i) {
      var $this = $(this);
      $this.attr('id', i);
      
      var level = parseInt(this.nodeName.substr(1));
      var offset = level - base_level;
      
      var li = new $('<li/>')
          .append('<a href="#' + i + '" class="animate">' + $this.text() + '</a>')
          .append($('<ul class="nav level-'+(offset+1)+'"/>'));
      
      $('<div>').append($toc).find('ul.level-'+offset+':last').append(li);
    });
    return $toc;
  }
</script>

<!-- latex render begin -->
<script type="text/x-mathjax-config">  
  MathJax.Hub.Queue(function () {
    //update scrollspy
    $('body').scrollspy('refresh');
  });
</script>
<script>
  $(function(){
    $('.md .mathjax').each(function (i, v) {
        //MathJax.Hub.Queue(["Typeset", MathJax.Hub, v]);
    })
  })
</script>
<!--script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script-->
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<!-- latex render end -->



    
    <script>
      var navHeight = 50;
      var footHeight = $('#footer').outerHeight(true);
      $(function(){
	
        //更新菜单
        $('.nav #blog').attr('class','active');
        
        //激活工具提示
        $('[data-toggle="tooltip"]').tooltip();
        
        //图片延迟加载
        $("img.lazy").lazyload({effect : "fadeIn", skip_invisible : false});	//bootstrap thumbnail img will be invisible at the begining
        
        //回到顶部按钮
        $.scrollUp({
	  scrollName: 'scrollUp',topDistance: '300',topSpeed: 300,animation: 'fade',animationInSpeed: 500,
	  animationOutSpeed: 500,scrollText: '',activeOverlay: false,
	});	
        
        //页面内链接滑动效果
        $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');
        $('a.animate').click(function(){
          var offset = navHeight;
          if ($(this).attr('offset')) {
            offset += parseInt($(this).attr('offset')); 
          }
          $body.animate({scrollTop: $($(this).attr('href')).offset().top - offset}, 500);
          return false;
        });        
      });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-45491170-1', 'harttle.github.io');
      ga('send', 'pageview');
    </script>
<!-- script -->

  </body>
</html>
